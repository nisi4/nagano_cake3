<div class="container">
  <div class="row d-flex justify-content-center">
    <div class="col-10">
      <div class="row mt-4 mb-3 d-flex justify-content-between">
        <div class="col-5">
          <h2>
            <span class="title">ショッピングカート</span>
          </h2>
        </div>
        <div class="col-5 d-flex justify-content-end align-items-center">
          <%= link_to "カートを空にする",public_cart_items_destroy_all_path,method: :delete,"data-confirm" => "本当に削除しますか？",class: "btn btn-danger text-white" %>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <table class="table table-bordered">
            <colgroup>
              <col width="40%">
              <col width="15%">
              <col width="15%">
              <col width="15%">
              <col width="15%">
            </colgroup>
            <thead class="thead-color">
              <tr>
                <th>商品名</th>
                <th>単価（税込）</th>
                <th>数量</th>
                <th>小計</th>
                <th></th>
              </tr>
            </thead>
            <% @cart_items.each do |cart_item| %>
            <tbody>
              <tr>
                <td class="align-middle">
                  <div class="row">
                    <div class="col-3">
                      <%= image_tag cart_item.item.item_image,class: "img-fluid" if cart_item.item.item_image.attached? %>
                    </div>
                    <div class="col-9 d-flex align-items-center">
                      <%= cart_item.item.name %>
                    </div>
                  </div>
                </td>
                <td class="align-middle"><%= cart_item.item.tax_included_price.to_s(:delimited) %></td>
                <%= form_with model: cart_item,url: public_cart_item_update_path(cart_item.id),method: :patch do |f| %>
                <td class="align-middle"><%= f.select :amount,*[1..10] %> <%= f.submit "変更",class: "btn btn-success btn-sm text-white" %></td>
                <% end %>
                <td class="align-middle"><%= cart_item.subtotal_price.to_s(:delimited) %></td>
                <td class="align-middle text-center"><%= link_to "削除する",public_cart_item_destory_path(cart_item.id),method: :delete,"data-confirm" => "本当に削除しますか？",class: "btn btn-danger text-white" %></td>
                <% @total += cart_item.subtotal_price %>
              </tr>
            </tbody>
            <% end %>
          </table>
        </div>
      </div>
      <div class="row my-4 d-flex align-items-center justify-content-between">
        <div class="col-6 ms-5">
          <%= link_to "買い物を続ける",root_path,class: "btn btn-primary text-white" %>
        </div>
        <div class="col-4">
          <table class="table table-bordered mb-0">
            <colgroup>
              <col width="10%">
              <col width="10%">
            </colgroup>
            <tr>
              <td class="align-middle" style="background-color:#dcdcdc;">合計金額</td>
              <td class="align-middle"><%= @total.to_s(:delimited) %></td>
            </tr>
          </table>
        </div>
      </div>
      <div class="row d-flex justify-content-center mt-5">
        <div class="col-4 text-center">
          <%= link_to "情報入力に進む",public_orders_new_path,class: "btn btn-success text-white" %>
        </div>
      </div>
    </div>
  </div>
</div>